{"version":3,"sources":["../../../api/server/controllers/BookController.js"],"names":["BookService","require","Util","util","BookController","req","res","getAllBooks","allBooks","length","setSuccess","send","setError","body","title","price","description","newBook","addBook","createdBook","message","alteredBook","id","params","Number","updateBook","getABook","theBook","deleteBook","bookToDelete","module","exports"],"mappings":"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","sourcesContent":["const BookService = require('../services/BookService');\nconst Util = require('../utils/Utils');\n\nconst util = new Util();\n\nclass BookController {\n\tstatic async getAllBooks(req, res) {\n\t\ttry {\n\t\t\tconst allBooks = await BookService.getAllBooks();\n\t\t\tif (allBooks.length > 0) {\n\t\t\t\tutil.setSuccess(200, 'Books retrieved', allBooks);\n\t\t\t} else {\n\t\t\t\tutil.setSuccess(200, 'No book found');\n\t\t\t}\n\t\t\treturn util.send(res);\n\t\t} catch (error) {\n\t\t\tutil.setError(400, error);\n\t\t\treturn util.send(res);\n\t\t}\n\t}\n\n\tstatic async addBook(req, res) {\n\t\tif (!req.body.title || !req.body.price || !req.body.description) {\n\t\t\tutil.setError(400, 'Please provide complete details');\n\t\t\treturn util.send(res);\n\t\t}\n\t\tconst newBook = req.body;\n\t\ttry {\n\t\t\tconst createdBook = await BookService.addBook(newBook);\n\t\t\tutil.setSuccess(201, 'Book Added!', createdBook);\n\t\t\treturn util.send(res);\n\t\t} catch (error) {\n\t\t\tutil.setError(400, error.message);\n\t\t\treturn util.send(res);\n\t\t}\n\t}\n\n\tstatic async updatedBook(req, res) {\n\t\tconst alteredBook = req.body;\n\t\tconst { id } = req.params;\n\t\tif (!Number(id)) {\n\t\t\tutil.setError(400, 'Please input a valid numeric value');\n\t\t\treturn util.send(res);\n\t\t}\n\t\ttry {\n\t\t\tconst updateBook = await BookService.updateBook(id, alteredBook);\n\t\t\tif (!updateBook) {\n\t\t\t\tutil.setError(404, `Cannot find book with the id: ${id}`);\n\t\t\t} else {\n\t\t\t\tutil.setSuccess(200, 'Book updated', updateBook);\n\t\t\t}\n\t\t\treturn util.send(res);\n\t\t} catch (error) {\n\t\t\tutil.setError(404, error);\n\t\t\treturn util.send(res);\n\t\t}\n\t}\n\n\tstatic async getABook(req, res) {\n\t\tconst { id } = req.params;\n\n\t\tif (!Number(id)) {\n\t\t\tutil.setError(400, 'Please input a valid numeric value');\n\t\t\treturn util.send(res);\n\t\t}\n\n\t\ttry {\n\t\t\tconst theBook = await BookService.getABook(id);\n\n\t\t\tif (!theBook) {\n\t\t\t\tutil.setError(404, `Cannot find book with the id ${id}`);\n\t\t\t} else {\n\t\t\t\tutil.setSuccess(200, 'Found Book', theBook);\n\t\t\t}\n\t\t\treturn util.send(res);\n\t\t} catch (error) {\n\t\t\tutil.setError(404, error);\n\t\t\treturn util.send(res);\n\t\t}\n\t}\n\n\tstatic async deleteBook(req, res) {\n\t\tconst { id } = req.params;\n\n\t\tif (!Number(id)) {\n\t\t\tutil.setError(400, 'Please provide a numeric value');\n\t\t\treturn util.send(res);\n\t\t}\n\n\t\ttry {\n\t\t\tconst bookToDelete = await BookService.deleteBook(id);\n\n\t\t\tif (bookToDelete) {\n\t\t\t\tutil.setSuccess(200, 'Book deleted');\n\t\t\t} else {\n\t\t\t\tutil.setError(404, `Book with the id ${id} cannot be found`);\n\t\t\t}\n\t\t\treturn util.send(res);\n\t\t} catch (error) {\n\t\t\tutil.setError(400, error);\n\t\t\treturn util.send(res);\n\t\t}\n\t}\n}\n\nmodule.exports = BookController;\n"],"file":"BookController.js"}